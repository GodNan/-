webpackJsonp([56],{lX9G:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Dd8w"),o=s.n(r),i=s("NYxO"),a=s("Q3je"),n={data:function(){var t=this;return{list:[],listLoading:!1,listQuery:{processId:"",citizenName:"",citizenId:"",currentState:"",startDate:"",endDate:""},rules:{startDate:[{validator:function(e,s,r){""!==t.listQuery.endDate&&s>t.listQuery.endDate&&r(new Error("开始日期不能大于结束日期!")),r()},trigger:"change"}],endDate:[{validator:function(e,s,r){""!==t.listQuery.startDate&&s<t.listQuery.startDate&&r(new Error("结束日期不能小于开始日期!")),r()},trigger:"change"}]}}},computed:o()({},Object(i.b)(["dict"]),{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date},listQueryX:function(){var t=this.listQuery;return o()({},t,{permissionId:this.$store.getters.permissions,cityid:this.$store.getters.cityidQuery,cityidHolder:this.$store.getters.cityid,pageNum:this.$store.getters.pageNum,pageRow:this.$store.getters.pageRow,pageRole:this.$store.getters.roles})},showList:function(){return this.$route.name.indexOf("List")>-1},query:function(){return this.getQuery(this.listQueryX)}}),watch:{"listQueryX.cityid":"getList","listQueryX.pageNum":"getList","listQueryX.pageRow":function(t,e){1===this.$store.getters.pageNum?this.getList():this.$store.dispatch("TogglePageNum",1)}},created:function(){console.log("permissions",this.$store.getters.permissions),this.getList(),this.$store.dispatch("GetRemind",{remindType:"tasksTodo",cityid:this.$store.getters.cityid,cityidHolder:this.$store.getters.cityid+"%",permissions:this.$store.getters.permissions})},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.getList()})},getList:function(){var t=this;this.listLoading=!0,Object(a.i)(this.query).then(function(e){t.listLoading=!1,t.list=e.data.content,t.$store.dispatch("ToggleTotalCount",e.data.totalElements)})},resetForm:function(t){this.$refs[t].resetFields()},handleTask:function(t){59===t.processId||19===t.processId?119===t.currentState||209===t.currentState||219===t.currentState?this.$store.dispatch("ToggleKindstr",t.optionsApplyFor):this.$store.dispatch("ToggleKindstr",t.optionsAdopt):!(58!==t.processId&&18!==t.processId||25!==t.currentState&&30!==t.currentState)?this.$store.dispatch("ToggleKindstr",null!==t.optionsAdopt?t.optionsAdopt:t.optionsApplyFor):this.$store.dispatch("ToggleKindstr",t.optionsApplyFor),this.$store.dispatch("ToggleProcessId",t.processId),this.$store.dispatch("ToggleHandleState",t.currentState),11===t.currentState||219===t.currentState?this.tasksTodoApplyHandle(t):24===t.currentState?this.tasksTodoPostHandle(t):89===t.processId||929===t.processId||891===t.processId||892===t.processId?this.tasksTodoAreaMoveHandle(t):49===t.processId?this.tasksTodoLogoutHandle(t):46===t.processId?this.tasksTodoLogoutResumeHandle(t):this.tasksTodoHandle(t)},tasksTodoPostHandle:function(t){var e=t.uuid,s=t.cdpfId;this.$router.push({name:"tasksTodoPostHandle",params:{requestId:e,cdpfId:s,handle:!0}})},tasksTodoAreaMoveHandle:function(t){var e=t.uuid,s=t.cdpfId;this.$router.push({name:"tasksTodoAreaMoveHandle",params:{requestId:e,cdpfId:s,handle:!0}})},tasksTodoLogoutHandle:function(t){var e=t.uuid,s=t.cdpfId;this.$router.push({name:"tasksTodoLogoutHandle",params:{requestId:e,cdpfId:s,handle:!0}})},tasksTodoLogoutResumeHandle:function(t){var e=t.uuid,s=t.cdpfId;this.$router.push({name:"tasksTodoLogoutResumeHandle",params:{requestId:e,cdpfId:s,handle:!0}})},tasksTodoApplyHandle:function(t){var e=t.uuid,s=t.cdpfId;this.$router.push({name:"tasksTodoApplyHandle",params:{requestId:e,cdpfId:s}})},tasksTodoHandle:function(t){var e=t.uuid,s=t.cdpfId;this.$router.push({name:"tasksTodoHandle",params:{requestId:e,cdpfId:s,handle:!0}})}}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view"),t._v(" "),t.showList?s("div",{staticClass:"app-container"},[s("el-form",{ref:"query",attrs:{size:"medium",model:t.listQuery,rules:t.rules,"label-width":"100px"}},[s("el-row",[s("el-col",{attrs:{span:24}},[s("el-form-item",{staticClass:"queryTitle",attrs:{label:"查询条件"}})],1)],1),t._v(" "),s("el-row",{attrs:{gutter:15}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"姓名",prop:"citizenName"}},[s("el-input",{model:{value:t.listQuery.citizenName,callback:function(e){t.$set(t.listQuery,"citizenName",e)},expression:"listQuery.citizenName"}})],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"身份证号",prop:"citizenId"}},[s("el-input",{model:{value:t.listQuery.citizenId,callback:function(e){t.$set(t.listQuery,"citizenId",e)},expression:"listQuery.citizenId"}})],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:15}},[s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"流程名称",prop:"processId"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.listQuery.processId,callback:function(e){t.$set(t.listQuery,"processId",e)},expression:"listQuery.processId"}},t._l(t.dict.processList,function(t){return s("el-option",{key:t.code,attrs:{label:t.description,value:parseInt(t.code)}})}))],1)],1),t._v(" "),s("el-col",{attrs:{span:12}},[s("el-form-item",{attrs:{label:"当前环节",prop:"currentState"}},[s("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.listQuery.currentState,callback:function(e){t.$set(t.listQuery,"currentState",e)},expression:"listQuery.currentState"}},t._l(t.dict.processStateList,function(t){return s("el-option",{key:t.code,attrs:{label:t.description,value:parseInt(t.code)}})}))],1)],1)],1),t._v(" "),s("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[s("el-col",{attrs:{span:6}},[s("el-form-item")],1),t._v(" "),s("el-col",{attrs:{span:6}},[s("el-form-item",[s("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.submitForm("query")}}},[t._v("查询")])],1)],1),t._v(" "),s("el-col",{attrs:{span:2}},[s("el-form-item",{attrs:{"label-width":"10px"}},[s("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){t.resetForm("query")}}},[t._v("重置")])],1)],1),t._v(" "),s("el-col",{attrs:{span:10}},[s("el-form-item")],1)],1)],1),t._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"加载中",border:"",fit:"","highlight-current-row":""}},[s("el-table-column",{attrs:{align:"center",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-button",{attrs:{type:"text"},on:{click:function(s){t.handleTask(e.row)}}},[t._v(t._s(e.row.citizenName))])]}}])}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"citizenId",label:"身份证号",width:"170"}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"processId",label:"流程名称",width:"200",formatter:t.formatterProcessid}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"currentState",label:"当前环节",width:"105",formatter:t.formatterState}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"formerState",label:"上一环节",width:"105",formatter:t.formatterState}}),t._v(" "),s("el-table-column",{attrs:{align:"center",prop:"modifyDateFormat",label:"上一环节时间",width:"160"}})],1)],1):t._e()],1)},staticRenderFns:[]},d=s("VU/8")(n,l,!1,null,null,null);e.default=d.exports}});