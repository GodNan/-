webpackJsonp([6],{"/uRo":function(e,t,i){(e.exports=i("FZ+f")(!0)).push([e.i,"\n.el-checkbox {\n  margin-left: 30px;\n}\n","",{version:3,sources:["D:/JAVA_WORKSPACE/idea/vue-bdpfnew/src/views/user/role.vue"],names:[],mappings:";AACA;EACE,kBAAkB;CACnB",file:"role.vue",sourcesContent:["\n.el-checkbox {\n  margin-left: 30px;\n}\n"],sourceRoot:""}])},Fi2K:function(e,t,i){var s=i("/uRo");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i("rjj0")("cfbc7caa",s,!0)},IgWv:function(e,t,i){var s=i("jqTE");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);i("rjj0")("09a9cfff",s,!0)},STSY:function(e,t,i){"use strict";t.e=function(e){return Object(s.a)({url:"/roles/page",method:"post",data:e})},t.c=function(e){return Object(s.a)({url:"/roles/"+e,method:"get"})},t.a=function(e){return Object(s.a)({url:"/roles/",method:"post",data:e})},t.f=function(e){return Object(s.a)({url:"/roles/",method:"put",data:e})},t.b=function(e){return Object(s.a)({url:"/roles/"+e,method:"patch"})},t.d=function(){return Object(s.a)({url:"/roles",method:"get"})};var s=i("VsUZ")},YFfu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=i("Dd8w"),o=i.n(s),n=i("NYxO"),r=i("PJh5"),l=i.n(r),a=i("vZz+"),u=i("STSY"),c={data:function(){return{list:[],allPermission:[],listPermission:[],listLoading:!1,dialogStatus:"create",dialogFormVisible:!1,textMap:{update:"编辑",create:"新建角色"},tempRole:{roleName:"",roleDescribe:"",uuid:"",permissions:[]},adminName:"管理员",listQuery:{}}},created:function(){this.getList(this.query)},computed:o()({},Object(n.b)(["userId"]),{listQueryX:function(){var e=this.listQuery;return o()({},e,{pageNum:this.$store.getters.pageNum,pageRow:this.$store.getters.pageRow})},showList:function(){return this.$route.name.indexOf("List")>-1},query:function(){return this.getQuery(this.listQueryX)}}),watch:{"listQueryX.pageNum":"getList","listQueryX.pageRow":function(e,t){1===this.$store.getters.pageNum?this.getList():this.$store.dispatch("TogglePageNum",1)}},methods:{getListPermission:function(){var e=this;Object(a.e)().then(function(t){e.listPermission=t.data})},getList:function(){var e=this;this.listLoading=!0,Object(u.e)(this.query).then(function(t){e.listLoading=!1,e.list=t.data.content,e.$store.dispatch("ToggleTotalCount",t.data.totalElements)})},getIndex:function(e){return e+1},showCreate:function(){this.getListPermission(),this.tempRole.roleName="",this.tempRole.uuid="",this.tempRole.roleDescribe="",this.tempRole.permissions=[],this.dialogStatus="create",this.dialogFormVisible=!0},showUpdate:function(e,t){var i=this;this.getListPermission(),Object(u.c)(e).then(function(e){i.tempRole=e.data}),this.dialogStatus="update",this.dialogFormVisible=!0},createRole:function(){var e=this;Object(u.a)(this.tempRole).then(function(t){e.getList(),e.dialogFormVisible=!1})},updateRole:function(){var e=this;Object(u.f)(this.tempRole).then(function(){e.getList(),e.dialogFormVisible=!1})},checkPermissionNum:function(){return 0!==this.tempRole.permissions.length||(this.$message.error("请至少选择一种权限"),!1)},checkRoleNameUnique:function(e){var t=this.tempRole.roleName;if(!t)return this.$message.error("请填写角色名称"),!1;for(var i=this.list,s=!0,o=0;o<i.length;o++)if(i[o].roleName===t&&(!e||i[o].roleId!==e)){this.$message.error("角色名称已存在"),s=!1;break}return s},removeRole:function(e){var t=this;this.$confirm("确定删除此角色?","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){t.listLoading=!0,Object(u.b)(e).then(function(e){t.getList(),t.listLoading=!1})})},dateFormat:function(e,t){var i=e[t.property];return void 0===i?"":l()(i).format("YYYY-MM-DD")},handleCheckAllChange:function(e,t){if(this.tempRole.permissions.indexOf(e.uuid)>-1)for(var i=0;i<e.childList.length;i++)this.addUnique(e.childList[i].uuid,this.tempRole.permissions);else for(var s=0;s<e.childList.length;s++)this.delUnique(e.childList[s].uuid,this.tempRole.permissions)},handleCheckedCitiesChange:function(e,t){for(var i=0,s=0;s<e.childList.length;s++)this.tempRole.permissions.indexOf(e.childList[s].uuid)>-1&&i++;0===i&&this.delUnique(e.uuid,this.tempRole.permissions),i>0&&this.addUnique(e.uuid,this.tempRole.permissions)},addUnique:function(e,t){t.indexOf(e)<0&&t.push(e)},delUnique:function(e,t){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("router-view"),e._v(" "),e.showList?i("div",{staticClass:"filter-container"},[i("el-form",[i("el-form-item",[e.hasPerm("role:add")?i("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.showCreate}},[e._v("添加\n        ")]):e._e()],1)],1)],1):e._e(),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"角色",prop:"roleName"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"描述",prop:"roleDescribe"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createDate",formatter:e.dateFormat}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"修改时间",prop:"modifyDate",formatter:e.dateFormat}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"管理"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.hasPerm("role:update")?i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small"},on:{click:function(i){e.showUpdate(t.row.uuid,t.$index)}}}):e._e(),e._v(" "),e.hasPerm("role:delete")?i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small"},on:{click:function(i){e.removeRole(t.row.uuid)}}}):e._e()]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{staticClass:"small-space",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:e.tempRole,"label-position":"right","label-width":"80px"}},[i("el-input",{attrs:{type:"hidden"},model:{value:e.tempRole.uuid,callback:function(t){e.$set(e.tempRole,"uuid",t)},expression:"tempRole.uuid"}}),e._v(" "),i("el-form-item",{attrs:{label:"角色名称",required:""}},[i("el-input",{attrs:{type:"text"},model:{value:e.tempRole.roleName,callback:function(t){e.$set(e.tempRole,"roleName",t)},expression:"tempRole.roleName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色描述",required:""}},[i("el-input",{attrs:{type:"text"},model:{value:e.tempRole.roleDescribe,callback:function(t){e.$set(e.tempRole,"roleDescribe",t)},expression:"tempRole.roleDescribe"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"权限设置",required:""}},e._l(e.listPermission,function(t,s){return i("div",{key:t.menuName},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[e._v(e._s(t.menuName))]),e._v(" "),i("span",{staticStyle:{float:"right"}},[i("el-checkbox",{attrs:{disabled:0===t.childList.length,label:t.uuid},on:{change:function(i){e.handleCheckAllChange(t,s)}},model:{value:e.tempRole.permissions,callback:function(t){e.$set(e.tempRole,"permissions",t)},expression:"tempRole.permissions"}},[e._v("全选")])],1)]),e._v(" "),i("div",{staticClass:"text item"},[i("el-checkbox-group",{on:{change:function(i){e.handleCheckedCitiesChange(t,s)}},model:{value:e.tempRole.permissions,callback:function(t){e.$set(e.tempRole,"permissions",t)},expression:"tempRole.permissions"}},e._l(t.childList,function(t,s){return i("el-checkbox",{key:t.uuid,attrs:{label:t.uuid}},[e._v(e._s(t.functionName))])}))],1)])],1)}))],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"success"},on:{click:e.createRole}},[e._v("创 建")]):i("el-button",{attrs:{type:"primary"},on:{click:e.updateRole}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var m=i("VU/8")(c,d,!1,function(e){i("Fi2K"),i("IgWv")},"data-v-ad5bea8e",null);t.default=m.exports},jqTE:function(e,t,i){(e.exports=i("FZ+f")(!0)).push([e.i,"\n.requiredPerm[data-v-ad5bea8e] {\n  color: #ff0e13;\n}\n","",{version:3,sources:["D:/JAVA_WORKSPACE/idea/vue-bdpfnew/src/views/user/role.vue"],names:[],mappings:";AACA;EACE,eAAe;CAChB",file:"role.vue",sourcesContent:["\n.requiredPerm[data-v-ad5bea8e] {\n  color: #ff0e13;\n}\n"],sourceRoot:""}])},"vZz+":function(e,t,i){"use strict";t.d=function(){return Object(s.a)({url:"/permissions/parent-permissions",method:"get"})},t.e=function(){return Object(s.a)({url:"/permissions/tree",method:"get"})},t.a=function(e){return Object(s.a)({url:"/permissions",method:"post",data:e})},t.g=function(e){return Object(s.a)({url:"/permissions",method:"put",data:e})},t.b=function(e){return Object(s.a)({url:"/permissions/"+e,method:"patch"})},t.c=function(e){return Object(s.a)({url:"/permissions/"+e,method:"get"})},t.f=function(e){return Object(s.a)({url:"/permissions/page",method:"post",data:e})};var s=i("VsUZ")}});