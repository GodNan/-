webpackJsonp([93],{jNC1:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("Dd8w"),n=i.n(s),l=i("GKtG"),o=i("PJh5"),a=i.n(o),r={data:function(){return{list:[],listLoading:!1,photoList:[],photoSelection:[],cardsSelection:[],checkIds:[],checkedData:[],isIndeterminate:!0,checkAll:!1,listQuery:{name:"",citizenId:""}}},computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date},listQueryX:function(){var t=this.listQuery;return n()({},t,{pageNum:this.$store.getters.pageNum,pageRow:this.$store.getters.pageRow})},showList:function(){return this.$route.name.indexOf("Query")>-1},query:function(){return this.getQuery(this.listQueryX)}},watch:{"listQueryX.cityid":"getList","listQueryX.pageNum":"getList","listQueryX.pageRow":function(t,e){1===this.$store.getters.pageNum?this.getList():this.$store.dispatch("TogglePageNum",1)}},created:function(){this.getList()},methods:{submitForm:function(t){this.getList()},getList:function(){var t=this;this.listLoading=!0,Object(l.k)(this.listQueryX).then(function(e){t.list=e.data.content,t.$store.dispatch("ToggleTotalCount",e.data.totalElements),t.photoSelection=[];for(var i=0;i<t.list.length;i++)t.list[i]&&t.photoSelection.push(t.list[i].bdpfid);Object(l.l)(t.photoSelection).then(function(e){t.listLoading=!1;var i=e.data;t.photoList=[],t.cardsSelection=[];for(var s=0;s<i.length;s++)t.photoList.push({key:i[s].citizenId,name:i[s].name,citizenId:i[s].citizenId,imageBase64:i[s].photo,text:""}),t.cardsSelection.push(i[s].citizenId)})})},dateFormat:function(t,e){var i=t[e.property];return void 0===i?"":a()(i).format("YYYY-MM-DD")},changeFun:function(t){this.cardsSelection=[];for(var e=0;e<t.length;e++)this.cardsSelection.push(t[e].citizenId)},moveToCardsMake:function(){var t=this;if(this.checkIds.length>0){this.checkedData=[];for(var e=0;e<this.checkIds.length;e++)for(var i=0;i<this.photoList.length;i++)this.checkIds[e]==this.photoList[i].citizenId&&this.checkedData.push({citizenId:this.photoList[i].citizenId,text:this.photoList[i].text});Object(l.m)(this.checkedData).then(function(e){alert(e.content),t.isSubmitting=!1,window.location.reload()})}else alert("请选择推送的残疾人")},resetForm:function(t){this.$refs[t].resetFields()},handleCheckAllChange:function(t){this.checkIds=t?this.cardsSelection:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(t){this.isIndeterminate=this.checkIds.length<this.cardsSelection.length,this.checkAll=this.cardsSelection.length==this.checkIds.length}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("router-view"),t._v(" "),t.showList?i("div",{staticClass:"app-container"},[i("el-form",{ref:"query",attrs:{size:"medium",model:t.listQuery,"label-width":"70px"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{staticClass:"queryTitle",attrs:{label:"查询条件","label-width":"100px"}})],1)],1),t._v(" "),i("el-row",{attrs:{gutter:25}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"身份证号",prop:"citizenId"}},[i("el-input",{model:{value:t.listQuery.citizenId,callback:function(e){t.$set(t.listQuery,"citizenId",e)},expression:"listQuery.citizenId"}})],1)],1)],1),t._v(" "),i("el-row",{attrs:{gutter:20,type:"flex",justify:"left"}},[i("el-col",{staticStyle:{"padding-left":"2cm"},attrs:{span:14}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:t.moveToCardsMake}},[t._v("推送至卡面照片处理")])],1)],1),t._v(" "),i("el-col",{attrs:{span:4}},[i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.submitForm("query")}}},[t._v("查询")])],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{"label-width":"10px"}},[i("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){t.resetForm("query")}}},[t._v("重置")])],1)],1)],1)],1),t._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{"element-loading-text":"加载中",border:"",fit:"","highlight-current-row":""}},[i("el-row",[i("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")])],1),t._v(" "),i("el-row",{attrs:{gutter:20}},[i("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.checkIds,callback:function(e){t.checkIds=e},expression:"checkIds"}},t._l(t.photoList,function(e){return i("el-col",{key:e.citizenId,attrs:{span:4}},[i("img",{staticStyle:{"margin-left":"35px","margin-top":"20px"},attrs:{width:"102",height:"120",src:"data:image/jpeg;base64,"+e.imageBase64}}),t._v(" "),i("el-checkbox",{key:e.citizenId,attrs:{label:e.citizenId}}),t._v(" "),i("el-input",{attrs:{type:"text",placeholder:"推送原因"},model:{value:e.text,callback:function(i){t.$set(e,"text",i)},expression:"item.text"}})],1)}))],1)],1)],1):t._e()],1)},staticRenderFns:[]},h=i("VU/8")(r,c,!1,null,null,null);e.default=h.exports}});