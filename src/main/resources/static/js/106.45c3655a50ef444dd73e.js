webpackJsonp([106],{V2Kn:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("8urd"),s=i("Vge3"),n=i("VsUZ");var l=i("Q3je"),d={name:"AreaMove",props:{idt:{type:Boolean,default:!1},info:{type:Boolean,default:!1}},data:function(){return{isSubmitting:!1,handle:this.info,isLoading:!1,isIdt:this.idt,newApply:!0,disabled:this.info,citizen:{uuid:this.$route.params.cdpfId,name:"",citizenId:"",cityid:"",newCityid:"",jiguanCode:""},rules:{cityid:[{required:!0,message:"请选择户籍地社区",trigger:"change"}],newCityid:[{required:!0,message:"请选择目标户籍地社区",trigger:"change"}]},hjquxian:"",hjjiedao:"",jzquxian:"",jzjiedao:"",hjwatch:!1,jzwatch:!1,areas:{hjqxList:[],hjjdList:[],hjsqList:[],jzqxList:[],jzjdList:[],jzsqList:[]}}},watch:{hjquxian:function(t){this.getAreas(t,"hjjdList"),this.hjwatch&&(this.hjjiedao="")},hjjiedao:function(t){this.getAreas(t,"hjsqList"),this.hjwatch&&(this.citizen.cityid=""),this.handle||(this.hjwatch=!0)},jzquxian:function(t){this.getAreas(t,"jzjdList"),this.jzwatch&&(this.jzjiedao="")},jzjiedao:function(t){this.getAreas(t,"jzsqList"),this.jzwatch&&(this.citizen.newCityid=""),this.handle||(this.jzwatch=!0)}},created:function(){this.getAreas("11","hjqxList"),this.getAreas("11","jzqxList"),this.handle?this.getRequestInfo():this.getCitizenInfo()},methods:{getJiguanCode:function(){return this.citizen.jiguanCode="",this.citizen.jiguanCode+=this.getHjJzAdd(this.jzquxian,this.areas.jzqxList),this.citizen.jiguanCode+=this.getHjJzAdd(this.jzjiedao,this.areas.jzjdList),this.citizen.jiguanCode+=this.getHjJzAdd(this.citizen.newCityid,this.areas.jzsqList),this.citizen.jiguanCode},areaMoveSubmit:function(){var t=this;this.isSubmitting=!0,this.$refs.areamove.validate(function(e){if(!e)return t.isSubmitting=!1,!1;var i;(i=t.citizen,Object(n.a)({url:"/areamoves/apply",method:"post",data:i})).then(function(e){t.disabled=!0,alert(e.content),t.isSubmitting=!1,t.$router.push({name:"citizenList"})})})},getCitizenInfo:function(){var t=this;this.isLoading=!0,Object(s.b)(this.$route.params.cdpfId).then(function(e){t.isLoading=!1,t.citizen=e.data,t.getHjDz(e.data.cityid)})},getRequestInfo:function(){var t=this;this.isLoading=!0,Object(l.a)(this.$route.params.requestId).then(function(e){t.isLoading=!1,null!==e.data&&null!==e.data.processId&&(89!==e.data.processId&&929!==e.data.processId&&891!==e.data.processId||(t.citizen.cityid=e.data.cityid,t.getHjDz(e.data.cityid),t.getJzDz(e.data.optionsApplyFor),929===e.data.processId&&(t.getAreas("100000000000","jzqxList"),t.getJzDzOutBJ(e.data.optionsApplyFor)),t.citizen.newCityid=e.data.optionsApplyFor),892===e.data.processId&&(t.citizen.cityid=e.data.optionsApplyFor,t.getHjDz(e.data.optionsApplyFor),t.getJzDz(e.data.cityid),t.citizen.newCityid=e.data.cityid))})},getHjJzAdd:function(t,e){if(""!==t&&e.length>0){var i=e.find(function(e){return e.id===t});return null!==i&&void 0!==i?i.name:""}return""},getHjDz:function(t){null!=t&&(this.hjquxian=t.substr(0,6),this.hjjiedao=t.substr(0,9))},getJzDz:function(t){null!=t&&(this.jzquxian=t.substr(0,6),this.jzjiedao=t.substr(0,9))},getJzDzOutBJ:function(t){null!=t&&(this.jzquxian=t.substr(0,2)+"0000000000",this.jzjiedao=t.substr(0,4)+"00000000")},getAreas:function(t,e){var i=this;""!==t&&null!==t&&void 0!==t&&Object(a.b)(t).then(function(t){i.areas[e]=t.data})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],ref:"areamove",attrs:{model:t.citizen,rules:t.rules,"label-width":"150px",size:"medium","element-loading-text":"加载中"}},[t.handle?t._e():i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{readonly:"",disabled:!0},model:{value:t.citizen.name,callback:function(e){t.$set(t.citizen,"name",e)},expression:"citizen.name"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"身份证号",prop:"citizenId"}},[i("el-input",{attrs:{readonly:"",disabled:!0},model:{value:t.citizen.citizenId,callback:function(e){t.$set(t.citizen,"citizenId",e)},expression:"citizen.citizenId"}})],1)],1)],1),t._v(" "),i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{required:"",label:"现户籍地","label-width":"150px"}},[i("el-select",{attrs:{placeholder:"请选择区县",disabled:!0},model:{value:t.hjquxian,callback:function(e){t.hjquxian=e},expression:"hjquxian"}},t._l(t.areas.hjqxList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择街道",disabled:!0},model:{value:t.hjjiedao,callback:function(e){t.hjjiedao=e},expression:"hjjiedao"}},t._l(t.areas.hjjdList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"",prop:"cityid","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择社区",disabled:!0},model:{value:t.citizen.cityid,callback:function(e){t.$set(t.citizen,"cityid",e)},expression:"citizen.cityid"}},t._l(t.areas.hjsqList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("el-col",{attrs:{span:3}})],1),t._v(" "),i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{required:"",label:"目标户籍地","label-width":"150px"}},[i("el-select",{attrs:{placeholder:"请选择区县",disabled:t.disabled},model:{value:t.jzquxian,callback:function(e){t.jzquxian=e},expression:"jzquxian"}},t._l(t.areas.jzqxList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择街道",disabled:t.disabled},model:{value:t.jzjiedao,callback:function(e){t.jzjiedao=e},expression:"jzjiedao"}},t._l(t.areas.jzjdList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"",prop:"newCityid","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择社区",disabled:t.disabled},model:{value:t.citizen.newCityid,callback:function(e){t.$set(t.citizen,"newCityid",e)},expression:"citizen.newCityid"}},t._l(t.areas.jzsqList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1),t._v(" "),i("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.isSubmitting,expression:"isSubmitting",modifiers:{fullscreen:!0,lock:!0}}],attrs:{span:3,"element-loading-text":"操作处理中"}})],1),t._v(" "),t.handle?t._e():i("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[i("el-col",{attrs:{span:8}},[i("el-form-item")],1),t._v(" "),i("el-col",{attrs:{span:4}},[i("el-form-item",[t.isSubmitting?t._e():i("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:t.areaMoveSubmit}},[t._v("提交")])],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item")],1)],1)],1)],1)},staticRenderFns:[]},o=i("VU/8")(d,r,!1,null,null,null);e.default=o.exports}});