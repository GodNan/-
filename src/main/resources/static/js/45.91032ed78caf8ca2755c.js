webpackJsonp([45,106],{V2Kn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("8urd"),s=i("Vge3"),n=i("VsUZ");var r=i("Q3je"),l={name:"AreaMove",props:{idt:{type:Boolean,default:!1},info:{type:Boolean,default:!1}},data:function(){return{isSubmitting:!1,handle:this.info,isLoading:!1,isIdt:this.idt,newApply:!0,disabled:this.info,citizen:{uuid:this.$route.params.cdpfId,name:"",citizenId:"",cityid:"",newCityid:"",jiguanCode:""},rules:{cityid:[{required:!0,message:"请选择户籍地社区",trigger:"change"}],newCityid:[{required:!0,message:"请选择目标户籍地社区",trigger:"change"}]},hjquxian:"",hjjiedao:"",jzquxian:"",jzjiedao:"",hjwatch:!1,jzwatch:!1,areas:{hjqxList:[],hjjdList:[],hjsqList:[],jzqxList:[],jzjdList:[],jzsqList:[]}}},watch:{hjquxian:function(e){this.getAreas(e,"hjjdList"),this.hjwatch&&(this.hjjiedao="")},hjjiedao:function(e){this.getAreas(e,"hjsqList"),this.hjwatch&&(this.citizen.cityid=""),this.handle||(this.hjwatch=!0)},jzquxian:function(e){this.getAreas(e,"jzjdList"),this.jzwatch&&(this.jzjiedao="")},jzjiedao:function(e){this.getAreas(e,"jzsqList"),this.jzwatch&&(this.citizen.newCityid=""),this.handle||(this.jzwatch=!0)}},created:function(){this.getAreas("11","hjqxList"),this.getAreas("11","jzqxList"),this.handle?this.getRequestInfo():this.getCitizenInfo()},methods:{getJiguanCode:function(){return this.citizen.jiguanCode="",this.citizen.jiguanCode+=this.getHjJzAdd(this.jzquxian,this.areas.jzqxList),this.citizen.jiguanCode+=this.getHjJzAdd(this.jzjiedao,this.areas.jzjdList),this.citizen.jiguanCode+=this.getHjJzAdd(this.citizen.newCityid,this.areas.jzsqList),this.citizen.jiguanCode},areaMoveSubmit:function(){var e=this;this.isSubmitting=!0,this.$refs.areamove.validate(function(t){if(!t)return e.isSubmitting=!1,!1;var i;(i=e.citizen,Object(n.a)({url:"/areamoves/apply",method:"post",data:i})).then(function(t){e.disabled=!0,alert(t.content),e.isSubmitting=!1,e.$router.push({name:"citizenList"})})})},getCitizenInfo:function(){var e=this;this.isLoading=!0,Object(s.b)(this.$route.params.cdpfId).then(function(t){e.isLoading=!1,e.citizen=t.data,e.getHjDz(t.data.cityid)})},getRequestInfo:function(){var e=this;this.isLoading=!0,Object(r.a)(this.$route.params.requestId).then(function(t){e.isLoading=!1,null!==t.data&&null!==t.data.processId&&(89!==t.data.processId&&929!==t.data.processId&&891!==t.data.processId||(e.citizen.cityid=t.data.cityid,e.getHjDz(t.data.cityid),e.getJzDz(t.data.optionsApplyFor),929===t.data.processId&&(e.getAreas("100000000000","jzqxList"),e.getJzDzOutBJ(t.data.optionsApplyFor)),e.citizen.newCityid=t.data.optionsApplyFor),892===t.data.processId&&(e.citizen.cityid=t.data.optionsApplyFor,e.getHjDz(t.data.optionsApplyFor),e.getJzDz(t.data.cityid),e.citizen.newCityid=t.data.cityid))})},getHjJzAdd:function(e,t){if(""!==e&&t.length>0){var i=t.find(function(t){return t.id===e});return null!==i&&void 0!==i?i.name:""}return""},getHjDz:function(e){null!=e&&(this.hjquxian=e.substr(0,6),this.hjjiedao=e.substr(0,9))},getJzDz:function(e){null!=e&&(this.jzquxian=e.substr(0,6),this.jzjiedao=e.substr(0,9))},getJzDzOutBJ:function(e){null!=e&&(this.jzquxian=e.substr(0,2)+"0000000000",this.jzjiedao=e.substr(0,4)+"00000000")},getAreas:function(e,t){var i=this;""!==e&&null!==e&&void 0!==e&&Object(a.b)(e).then(function(e){i.areas[t]=e.data})}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"areamove",attrs:{model:e.citizen,rules:e.rules,"label-width":"150px",size:"medium","element-loading-text":"加载中"}},[e.handle?e._e():i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"姓名",prop:"name"}},[i("el-input",{attrs:{readonly:"",disabled:!0},model:{value:e.citizen.name,callback:function(t){e.$set(e.citizen,"name",t)},expression:"citizen.name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"身份证号",prop:"citizenId"}},[i("el-input",{attrs:{readonly:"",disabled:!0},model:{value:e.citizen.citizenId,callback:function(t){e.$set(e.citizen,"citizenId",t)},expression:"citizen.citizenId"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{required:"",label:"现户籍地","label-width":"150px"}},[i("el-select",{attrs:{placeholder:"请选择区县",disabled:!0},model:{value:e.hjquxian,callback:function(t){e.hjquxian=t},expression:"hjquxian"}},e._l(e.areas.hjqxList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择街道",disabled:!0},model:{value:e.hjjiedao,callback:function(t){e.hjjiedao=t},expression:"hjjiedao"}},e._l(e.areas.hjjdList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"",prop:"cityid","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择社区",disabled:!0},model:{value:e.citizen.cityid,callback:function(t){e.$set(e.citizen,"cityid",t)},expression:"citizen.cityid"}},e._l(e.areas.hjsqList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:3}})],1),e._v(" "),i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:9}},[i("el-form-item",{attrs:{required:"",label:"目标户籍地","label-width":"150px"}},[i("el-select",{attrs:{placeholder:"请选择区县",disabled:e.disabled},model:{value:e.jzquxian,callback:function(t){e.jzquxian=t},expression:"jzquxian"}},e._l(e.areas.jzqxList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择街道",disabled:e.disabled},model:{value:e.jzjiedao,callback:function(t){e.jzjiedao=t},expression:"jzjiedao"}},e._l(e.areas.jzjdList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:"",prop:"newCityid","label-width":"0",width:"100%"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择社区",disabled:e.disabled},model:{value:e.citizen.newCityid,callback:function(t){e.$set(e.citizen,"newCityid",t)},expression:"citizen.newCityid"}},e._l(e.areas.jzsqList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),i("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.isSubmitting,expression:"isSubmitting",modifiers:{fullscreen:!0,lock:!0}}],attrs:{span:3,"element-loading-text":"操作处理中"}})],1),e._v(" "),e.handle?e._e():i("el-row",{attrs:{gutter:20,type:"flex",justify:"center"}},[i("el-col",{attrs:{span:8}},[i("el-form-item")],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-form-item",[e.isSubmitting?e._e():i("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.areaMoveSubmit}},[e._v("提交")])],1)],1),e._v(" "),i("el-col",{attrs:{span:12}},[i("el-form-item")],1)],1)],1)],1)},staticRenderFns:[]},d=i("VU/8")(l,o,!1,null,null,null);t.default=d.exports},fhmm:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),n=i("NYxO"),r=i("rLcC"),l=i("V2Kn"),o=i("M3VY"),d=i("BzqM"),u=i("bBKa"),c=i("q1Tu"),h=i("brym"),p=i("9/5Y"),f=i("iVcN"),m=i("UqAJ"),b=i("5u+E"),g=i("zHhc"),j=i("jSlZ"),v=i("Q3je"),z={components:{Citizen:r.default,AreaMove:l.default,Eye:o.default,Ear:d.default,Speech:u.default,IdtBody:c.default,Iq:h.default,Mental:p.default,IdtResult:f.default,IdtphotoOldShow:m.default,TasksLog:b.default,OperLog:g.default},data:function(){var e=this;return{isLoading:!1,activeStep:0,activeName:"citizen",steps:[],requestNote:{requestId:this.$route.params.requestId,userId:this.$store.getters.userId,userName:this.$store.getters.nickname,note:"",handleState:this.$store.getters.handleState,finishState:0,handleType:"",backState:""},requestStakeholder:{requestId:this.$route.params.requestId,userId:"",cityid:this.$store.getters.cityid+"%",permissionId:"",delFlag:0},dtoState:{processId:this.$store.getters.processId,stateType:3,stateCode:0},rules:{handleType:[{required:!0,message:"请选择处理结果",trigger:"change"}],note:[{validator:function(t,i,a){""!==e.requestNote.handleType&&1!==e.requestNote.handleType&&""===i&&a(new Error("请填写处理意见!")),a()},trigger:"blur"}]}}},computed:s()({},Object(n.b)(["kindstr","isHulian","dict","requestIdCitizen"])),watch:{steps:function(e){var t=this;e.length>0&&(this.activeStep=this.steps.find(function(e){return e.stateCode===t.$store.getters.handleState}).orderNum-1)},"requestNote.handleType":function(e){var t=this;1===e?(this.requestStakeholder.delFlag=0,this.activeStep===this.steps.length-1?(this.requestNote.finishState=this.requestNote.handleState,this.requestStakeholder.delFlag=1,this.requestStakeholder.permissionId="nonebdpfnew"):(this.requestStakeholder.delFlag=0,this.requestNote.finishState=this.steps.find(function(e){return e.orderNum===t.activeStep+2}).stateCode,this.requestStakeholder.permissionId=this.steps.find(function(e){return e.stateCode===t.requestNote.finishState}).permissionId)):3===e?(this.requestNote.finishState=99,this.requestStakeholder.delFlag=1,this.requestStakeholder.permissionId="nonebdpfnew"):this.requestStakeholder.delFlag=0}},created:function(){this.getSteps()},methods:{submit:function(){var e=this;this.$refs.handle.validate(function(t){if(!t)return!1;3===e.requestNote.handleType?confirm('选择"不通过"这个流程将会结束,是否确定操作?')&&e.handleBusiness():e.handleBusiness()})},handleBusiness:function(){var e=this;this.requestNote.note=this.requestNote.note.replace(/ /g,"").replace(/-/g,""),""!==this.requestNote.note?this.requestNote.note+="-"+this.$refs.idtareamove.getJiguanCode():this.requestNote.note=this.$refs.idtareamove.getJiguanCode();var t={requestNote:this.requestNote,requestStakeholder:this.requestStakeholder,processId:this.$store.getters.processId};Object(v.b)(t).then(function(t){e.$router.push({name:"tasksTodoList"})})},handleClick:function(e,t){if("taskslog"===e.name)this.$refs.taskslog.getIdtInfo();else if("operlog"===e.name)this.$refs.idtoperlog.getIdtInfo();else{this.$refs["idt"+e.name].loaded||this.$refs["idt"+e.name].getIdtInfo(),"photoOldShow"===e.name&&this.$refs.idtphotoOldShow.getIdtInfo()}},getSteps:function(){var e=this;this.isLoading=!0,this.dtoState.stateType=3,Object(j.c)(this.dtoState).then(function(t){e.isLoading=!1,e.steps=t.data.sort(function(e,t){return e.orderNum-t.orderNum})})},getBackSteps:function(){var e=this;this.dtoState.stateType=1,this.dtoState.stateCode=this.steps.find(function(t){return t.orderNum===e.activeStep+1}).stateCode,Object(j.b)(this.dtoState).then(function(t){e.backSteps=t.data.filter(function(e){return e.orderNum>1})})}}},q={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[this.$route.params.handle?i("el-card",[i("el-form",{directives:[{name:"loading",rawName:"v-loading.body",value:e.isLoading,expression:"isLoading",modifiers:{body:!0}}],ref:"handle",attrs:{model:e.requestNote,rules:e.rules,size:"medium","label-position":"left","label-width":"85px","element-loading-text":"加载中"}},[i("el-row",[i("el-col",[i("el-form-item",{attrs:{label:"当前流程信息:","label-width":"170px"}},[i("el-steps",{attrs:{active:e.activeStep}},e._l(e.steps,function(e){return i("el-step",{key:e.stateCode,attrs:{title:e.name,icon:e.icon}})}))],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:8}},[i("el-form-item",{attrs:{label:"处理结果:",prop:"handleType"}},[i("el-radio-group",{model:{value:e.requestNote.handleType,callback:function(t){e.$set(e.requestNote,"handleType",t)},expression:"requestNote.handleType"}},[i("el-radio",{attrs:{label:1}},[e._v("通过")]),e._v(" "),i("el-radio",{attrs:{label:3}},[e._v("不通过")])],1)],1)],1)],1),e._v(" "),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"处理意见:",prop:"note"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.requestNote.note,callback:function(t){e.$set(e.requestNote,"note",t)},expression:"requestNote.note"}})],1)],1)],1),e._v(" "),i("el-row",[i("el-col",[i("el-form-item",{attrs:{"label-width":"0"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1)],1)],1):e._e(),e._v(" "),i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"基本信息",name:"citizen"}},[i("citizen",{ref:"idtcitizen",attrs:{idt:"",info:"",mark:this.$route.params.cdpfId}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"户籍迁移信息",name:"areamove"}},[i("area-move",{ref:"idtareamove",attrs:{info:""}})],1),e._v(" "),e.has(e.kindstr,"1")?i("el-tab-pane",{attrs:{label:"视力残疾",name:"eye"}},[i("eye",{ref:"idteye",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),e.has(e.kindstr,"2")?i("el-tab-pane",{attrs:{label:"听力残疾",name:"ear"}},[i("ear",{ref:"idtear",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),e.has(e.kindstr,"3")?i("el-tab-pane",{attrs:{label:"言语残疾",name:"speech"}},[i("speech",{ref:"idtspeech",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),e.has(e.kindstr,"4")?i("el-tab-pane",{attrs:{label:"肢体残疾",name:"body"}},[i("idt-body",{ref:"idtbody",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),e.has(e.kindstr,"5")?i("el-tab-pane",{attrs:{label:"智力残疾",name:"iq"}},[i("iq",{ref:"idtiq",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),e.has(e.kindstr,"6")?i("el-tab-pane",{attrs:{label:"精神残疾",name:"mental"}},[i("mental",{ref:"idtmental",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),e.has(e.kindstr,",")?i("el-tab-pane",{attrs:{label:"评定结果",name:"resultX"}},[i("idt-result",{ref:"idtresultX",attrs:{info:"",mark:e.requestIdCitizen}})],1):e._e(),e._v(" "),i("el-tab-pane",{attrs:{label:"旧系统评残照片",name:"photoOldShow"}},[i("idtphoto-old-show",{ref:"idtphotoOldShow"})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"任务历史",name:"taskslog"}},[i("tasks-log",{ref:"taskslog",attrs:{mark:this.$route.params.requestId}})],1),e._v(" "),i("el-tab-pane",{attrs:{label:"操作历史",name:"operlog"}},[i("oper-log",{ref:"idtoperlog",attrs:{mark:this.$route.params.cdpfId}})],1)],1)],1)},staticRenderFns:[]},y=i("VU/8")(z,q,!1,null,null,null);t.default=y.exports}});