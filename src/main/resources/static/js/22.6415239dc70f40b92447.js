webpackJsonp([22],{"7Xv8":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Dd8w"),a=o.n(r),l=o("NYxO"),i=o("s4+N"),s={data:function(){return{isLoading:!1,newApply:!0,disabled:!1,checkList:[],webHospitals:[],eyeDisabled:!0,earDisabled:!0,speechDisabled:!0,bodyDisabled:!0,iqDisabled:!0,mentalDisabled:!0,doctor:{uuid:this.$route.params.uuid,citizenId:"",docName:"",workHospital:"",workDepartment:"",evaluationType:"",docTitle:"",mobilePho:"",userAccount:"",userPassword:"",hospitalId:"",hosEvalType:"",areaCode:""},rules:{citizenId:[{required:!0,message:"请填写身份证号",trigger:"blur"}],docName:[{required:!0,message:"请填写姓名",trigger:"blur"}],workHospital:[{required:!0,message:"请填写所属医院",trigger:"change"}],workDepartment:[{required:!0,message:"请填写所属科室",trigger:"change"}],evaluationType:[{required:!0,message:"请填写医生评残项目",trigger:"blur"}],docTitle:[{required:!0,message:"请填写医生职称",trigger:"change"}],mobilePho:[{required:!0,message:"请填写手机号码",trigger:"blur"}],userAccount:[{required:!0,message:"请填写用户名",trigger:"blur"}],userPassword:[{required:!0,message:"请填写密码",trigger:"blur"}]}}},computed:a()({},Object(l.b)(["dict"])),watch:{"doctor.workHospital":function(){this.getHosEvalType(this.doctor.workHospital)}},created:function(){this.doctor.uuid&&this.getWebDoctor(),this.getWebHospitals()},methods:{getWebDoctor:function(){var e=this;Object(i.c)(this.doctor.uuid).then(function(t){e.doctor=t.data,e.doctor.uuid=e.$route.params.uuid})},getWebHospitals:function(){var e=this;Object(i.d)().then(function(t){e.webHospitals=t.data})},getHosEvalType:function(e){var t=this;Object(i.b)(e).then(function(e){t.checkList=[],t.eyeDisabled=!0,t.earDisabled=!0,t.speechDisabled=!0,t.bodyDisabled=!0,t.iqDisabled=!0,t.mentalDisabled=!0;for(var o=e.data.split(","),r=0;r<o.length;r++)o[r]&&("1"===o[r]?t.eyeDisabled=!1:"2"===o[r]?t.earDisabled=!1:"3"===o[r]?t.speechDisabled=!1:"4"===o[r]?t.bodyDisabled=!1:"5"===o[r]?t.iqDisabled=!1:"6"===o[r]&&(t.mentalDisabled=!1));""!==t.doctor.evaluationType&&null!==t.doctor.evaluationType&&(t.checkList=t.cleanArray(t.doctor.evaluationType)),t.doctor.evaluationType=""})},cleanArray:function(e){for(var t=e.split(","),o=[],r=0;r<t.length;r++)t[r]&&o.push(t[r]);return o},listToStr:function(){for(var e=this.checkList.sort(),t="",o=0;o<e.length;o++)e[o]&&(t+=e[o]+",");this.doctor.evaluationType=t.substr(0,t.length-1)},addWebDoctor:function(){var e=this;this.listToStr(),this.$refs.doctor.validate(function(t){if(!t)return!1;""!==e.doctor.uuid&&null!==e.doctor.uuid&&void 0!==e.doctor.uuid?Object(i.f)(e.doctor).then(function(t){e.doctor.uuid!==t.data?alert("更新出错,uuid不同"):(e.disabled=!0,alert(t.content),e.$router.push({name:"webDoctorManagementList"}))}):Object(i.a)(e.doctor).then(function(t){e.doctor.uuid=t.data,e.disabled=!0,e.newApply=!1,alert(t.content),e.$router.push({name:"webDoctorManagementList"})})})}}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],ref:"doctor",attrs:{model:e.doctor,rules:e.rules,"label-width":"80px",size:"medium","element-loading-text":"加载中"}},[o("el-container",{staticStyle:{border:"2px solid #f3f5f7"}},[o("el-main",[o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"身份证号",prop:"citizenId","label-width":"100px"}},[o("el-input",{model:{value:e.doctor.citizenId,callback:function(t){e.$set(e.doctor,"citizenId",t)},expression:"doctor.citizenId"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"姓名",prop:"docName","label-width":"100px"}},[o("el-input",{model:{value:e.doctor.docName,callback:function(t){e.$set(e.doctor,"docName",t)},expression:"doctor.docName"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"所属医院",prop:"workHospital","label-width":"100px"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.doctor.workHospital,callback:function(t){e.$set(e.doctor,"workHospital",t)},expression:"doctor.workHospital"}},e._l(e.webHospitals,function(e){return o("el-option",{key:e.orgCode,attrs:{label:e.orgName,value:e.orgCode}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"所属科室",prop:"workDepartment","label-width":"100px"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.doctor.workDepartment,callback:function(t){e.$set(e.doctor,"workDepartment",t)},expression:"doctor.workDepartment"}},e._l(e.dict.departmentReportList,function(e){return o("el-option",{key:e.id,attrs:{label:e.description,value:e.id}})}))],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:"医生评残项目","label-width":"100px"}},[o("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.doctor.hosEvalType,callback:function(t){e.$set(e.doctor,"hosEvalType",t)},expression:"doctor.hosEvalType"}}),e._v(" "),o("el-input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.doctor.evaluationType,callback:function(t){e.$set(e.doctor,"evaluationType",t)},expression:"doctor.evaluationType"}}),e._v(" "),o("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[o("el-checkbox",{attrs:{id:"eye",disabled:e.eyeDisabled,label:"1",border:""}},[e._v("视力")]),e._v(" "),o("el-checkbox",{attrs:{id:"ear",disabled:e.earDisabled,label:"2",border:""}},[e._v("听力")]),e._v(" "),o("el-checkbox",{attrs:{id:"speech",disabled:e.speechDisabled,label:"3",border:""}},[e._v("言语")]),e._v(" "),o("el-checkbox",{attrs:{id:"body",disabled:e.bodyDisabled,label:"4",border:""}},[e._v("肢体")]),e._v(" "),o("el-checkbox",{attrs:{id:"iq",disabled:e.iqDisabled,label:"5",border:""}},[e._v("智力")]),e._v(" "),o("el-checkbox",{attrs:{id:"mental",disabled:e.mentalDisabled,label:"6",border:""}},[e._v("精神")])],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"医生职称",prop:"docTitle","label-width":"100px"}},[o("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.doctor.docTitle,callback:function(t){e.$set(e.doctor,"docTitle",t)},expression:"doctor.docTitle"}},e._l(e.dict.titleReportList,function(e){return o("el-option",{key:e.id,attrs:{label:e.description,value:e.id}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"手机号码",prop:"mobilePho","label-width":"100px"}},[o("el-input",{model:{value:e.doctor.mobilePho,callback:function(t){e.$set(e.doctor,"mobilePho",t)},expression:"doctor.mobilePho"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:15}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"用户名",prop:"userAccount","label-width":"100px"}},[o("el-input",{model:{value:e.doctor.userAccount,callback:function(t){e.$set(e.doctor,"userAccount",t)},expression:"doctor.userAccount"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"密码",prop:"userPassword","label-width":"100px"}},[o("el-input",{model:{value:e.doctor.userPassword,callback:function(t){e.$set(e.doctor,"userPassword",t)},expression:"doctor.userPassword"}})],1)],1)],1),e._v(" "),o("el-row",{attrs:{gutter:15,type:"flex",justify:"center"}},[o("el-col",{attrs:{span:2}},[o("el-form-item",{attrs:{"label-width":"0"}},[o("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:function(t){e.addWebDoctor()}}},[e._v("保存")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var n=o("VU/8")(s,c,!1,function(e){o("ulFk")},null,null);t.default=n.exports},DF3L:function(e,t,o){(e.exports=o("FZ+f")(!0)).push([e.i,"\n.saveButton {\r\n  margin-bottom: 12px;\r\n  margin-left: -75px;\r\n  margin-top: 12px;\n}\r\n","",{version:3,sources:["D:/JAVA_WORKSPACE/idea/vue-bdpfnew/src/views/system/webDoctor.vue"],names:[],mappings:";AACA;EACE,oBAAoB;EACpB,mBAAmB;EACnB,iBAAiB;CAClB",file:"webDoctor.vue",sourcesContent:["\n.saveButton {\r\n  margin-bottom: 12px;\r\n  margin-left: -75px;\r\n  margin-top: 12px;\n}\r\n"],sourceRoot:""}])},"s4+N":function(e,t,o){"use strict";t.e=function(e){return Object(r.a)({url:"/webDoctors/listWebDoctor",method:"post",data:e})},t.c=function(e){return Object(r.a)({url:"/webDoctors/"+e,method:"get"})},t.d=function(){return Object(r.a)({url:"/webDoctors/getWebHospitals",method:"get"})},t.f=function(e){return Object(r.a)({url:"/webDoctors/updateWebDoctor",method:"put",data:e})},t.a=function(e){return Object(r.a)({url:"/webDoctors/addWebDoctor",method:"post",data:e})},t.b=function(e){return Object(r.a)({url:"/webDoctors/GetHosEvalTypeArr/"+e,method:"get"})};var r=o("VsUZ")},ulFk:function(e,t,o){var r=o("DF3L");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("464dc136",r,!0)}});