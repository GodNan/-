webpackJsonp([52],{aLax:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("rLcC"),s=i("M3VY"),r=i("BzqM"),l=i("bBKa"),n=i("q1Tu"),o=i("brym"),d=i("9/5Y"),c=i("iVcN"),h=i("5u+E"),u=i("zHhc"),p=i("eofl"),f={eye:1,ear:2,speech:3,body:4,iq:5,mental:6},m=["eye","ear","speech","body","iq","mental"],b=["idteye","idtear","idtspeech","idtbody","idtiq","idtmental"],v={components:{Citizen:a.default,Eye:s.default,Ear:r.default,Speech:l.default,IdtBody:n.default,Iq:o.default,Mental:d.default,IdtResult:c.default,TasksLog:h.default,OperLog:u.default},data:function(){return{diaoquParams:{citizenName:"刘某",citizenId:"110101198608263516"},isSubmitting:!1,active:"",shouldLoadIdtKindInfo:!1,valid:!1,requestId:this.$route.params.requestId,checkList:["citizen","resultX"],kindIdtSelected:["resultX","taskslog"],idt:{min:0,optionsApplyFor:"",dtocitizen:{},dtoeye:{},dtoear:{},dtospeech:{},dtobody:{},dtoiq:{},dtomental:{},dtoresultX:{}}}},created:function(){this.setOptionsApplyFor()},mounted:function(){this.shouldLoadIdtKindInfo&&this.loadIdtKindInfo()},watch:{checkList:function(t){if(t.length>3)this.$store.dispatch("ToggleIdtKind",7),this.active=t[t.length-1];else if(t.length>2){var e=t[2],i=f[e];this.$store.dispatch("ToggleIdtKind",i),this.active=t[t.length-1]}else this.$store.dispatch("ToggleIdtKind","")}},computed:{activeName:{get:function(){return""===this.active?this.checkList.length<3?"citizen":this.checkList[this.checkList.length-1]:this.active},set:function(t){}}},methods:{handleClick:function(t,e){var i=this.$refs["idt"+t.name].loaded,a=this.has(this.kindIdtSelected,t.name);!i&&a&&this.$refs["idt"+t.name].getIdtInfo(),"operlog"===t.name&&this.$refs.idtoperlog.getIdtInfo(),this.active=t.name},validateIdt:function(){var t=this;this.isSubmitting=!0;for(var e=function(e){var i=t.checkList[e];if(t.$refs["idt"+i].$refs[i].validate(function(e){e&&(t.idt["dto"+i]=t.$refs["idt"+i][i]),t.valid=e}),!t.valid)return t.isSubmitting=!1,t.handleClick({name:i}),"break";t.active="citizen"},i=this.checkList.length-1;i>-1;i--){if("break"===e(i))break}},validateIdtPhoto:function(){for(var t=!0,e=this.checkList.length-1;e>-1;e--){var i=this.checkList[e];if("citizen"!==i&&"resultX"!==i)if(""===this.$refs["idt"+i].$refs.idtPhoto.imageUrl){t=!1,this.handleClick({name:i}),alert("请上传评残图片");break}}return t},getQianruData:function(){var t=this;Object(p.a)(this.diaoquParams).then(function(e){"success"===e.type?t.isShow=!0:alert("res.type:"+e.type)})},saveIdt:function(){var t=this;if(this.validateIdtPhoto()){if(this.validateIdt(),!this.valid)return!1;this.idt.min=0,this.idt.optionsApplyFor="",this.getOptionsApplyFor(),Object(p.b)(this.idt).then(function(e){"success"===e.type?(t.isSubmitting=!1,alert(e.content),t.$router.push({name:"tasksTodoList"})):alert(e.content)})}},getOptionsApplyFor:function(){var t=this;if(this.checkList.length>2){this.checkList.forEach(function(e){var i=f[e];""!==i&&void 0!==i&&(t.idt.optionsApplyFor+=i+",")});var e=this.idt.optionsApplyFor.substr(0,this.idt.optionsApplyFor.length-1).split(","),i="",a="";if(e.length>0)for(var s=e.sort(),r=0;r<s.length;r++){var l=s[r];i+=l+",";var n=b[l-1],o=m[l-1];a+=l+","+this.$refs[n][o][o+"Level"]+","}this.idt.optionsApplyFor=i,this.$refs.idtresultX.resultX.kindstr=i,this.$refs.idtresultX.resultX.levelstr=a}},setOptionsApplyFor:function(){var t=this,e=this.$route.params.kindstr;null!==e&&""!==e&&(e.split(",").forEach(function(e){""!==e&&void 0!==e&&(t.checkList.push(m[e-1]),t.kindIdtSelected.push(m[e-1]))}),this.shouldLoadIdtKindInfo=!0)},loadIdtKindInfo:function(){this.handleClick({name:this.checkList[this.checkList.length-1]})}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("el-form",{attrs:{size:"medium"}},[i("el-row",[i("el-col",{attrs:{span:15}},[i("el-form-item",{attrs:{label:"残疾类别:"}},[i("el-checkbox-group",{model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[i("el-checkbox",{attrs:{label:"eye",border:""}},[t._v("视力")]),t._v(" "),i("el-checkbox",{attrs:{label:"ear",border:""}},[t._v("听力")]),t._v(" "),i("el-checkbox",{attrs:{label:"speech",border:""}},[t._v("言语")]),t._v(" "),i("el-checkbox",{attrs:{label:"body",border:""}},[t._v("肢体")]),t._v(" "),i("el-checkbox",{attrs:{label:"iq",border:""}},[t._v("智力")]),t._v(" "),i("el-checkbox",{attrs:{label:"mental",border:""}},[t._v("精神")])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:2}},[i("el-form-item",[t.isSubmitting?t._e():i("el-button",{attrs:{type:"primary",icon:"el-icon-success"},on:{click:t.saveIdt}},[t._v("保存")])],1)],1),t._v(" "),i("el-col",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.isSubmitting,expression:"isSubmitting",modifiers:{fullscreen:!0,lock:!0}}],attrs:{"element-loading-text":"操作处理中"}})],1)],1),t._v(" "),i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"基本信息",name:"citizen"}},[i("citizen",{ref:"idtcitizen",attrs:{idt:"",mark:this.$route.params.cdpfId}})],1),t._v(" "),t.has(t.checkList,"eye")?i("el-tab-pane",{attrs:{label:"视力残疾",name:"eye"}},[i("eye",{ref:"idteye",attrs:{mark:this.$route.params.requestId}})],1):t._e(),t._v(" "),t.has(t.checkList,"ear")?i("el-tab-pane",{attrs:{label:"听力残疾",name:"ear"}},[i("ear",{ref:"idtear",attrs:{mark:this.$route.params.requestId}})],1):t._e(),t._v(" "),t.has(t.checkList,"speech")?i("el-tab-pane",{attrs:{label:"言语残疾",name:"speech"}},[i("speech",{ref:"idtspeech",attrs:{mark:this.$route.params.requestId}})],1):t._e(),t._v(" "),t.has(t.checkList,"body")?i("el-tab-pane",{attrs:{label:"肢体残疾",name:"body"}},[i("idt-body",{ref:"idtbody",attrs:{mark:this.$route.params.requestId}})],1):t._e(),t._v(" "),t.has(t.checkList,"iq")?i("el-tab-pane",{attrs:{label:"智力残疾",name:"iq"}},[i("iq",{ref:"idtiq",attrs:{mark:this.$route.params.requestId}})],1):t._e(),t._v(" "),t.has(t.checkList,"mental")?i("el-tab-pane",{attrs:{label:"精神残疾",name:"mental"}},[i("mental",{ref:"idtmental",attrs:{mark:this.$route.params.requestId}})],1):t._e(),t._v(" "),i("el-tab-pane",{attrs:{label:"评定结果",name:"resultX"}},[i("idt-result",{ref:"idtresultX",attrs:{mark:this.$route.params.requestId}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"任务历史",name:"taskslog"}},[i("tasks-log",{ref:"idttaskslog",attrs:{mark:this.$route.params.requestId}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"操作历史",name:"operlog"}},[i("oper-log",{ref:"idtoperlog",attrs:{mark:this.$route.params.cdpfId}})],1)],1)],1)},staticRenderFns:[]},g=i("VU/8")(v,k,!1,null,null,null);e.default=g.exports},eofl:function(t,e,i){"use strict";e.a=function(t){return Object(a.a)({url:"/ksqrJiekou/getKsqrCitizenInfo",method:"post",data:t})},e.b=function(t){return Object(a.a)({url:"/ksqr",method:"put",data:t})};var a=i("VsUZ")}});